<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>{{ project_name }} Test Report</title>
  <link rel="stylesheet" href="html_resources/gtest_report.css">
</head>
<body>
  <h1>{{ project_name }} Test Report</h1>

  {# Jenkins build info #}
  {% if branch or release_tag or commit_id or build_number or report_date %}
  <table class="build_info">
    {% if branch and build_number %}
    <tr><th>Version</th><td>{{ project_name }}_{{ branch }}_#{{ build_number }}</td></tr>
    {% endif %}
    {% if release_tag %}
    <tr><th>Release</th><td>{{ release_tag }}</td></tr>
    {% endif %}
    {% if commit_id %}
    <tr><th>Commit ID</th><td>{{ commit_id }}</td></tr>
    {% endif %}
    {% if build_number %}
    <tr><th>#Build</th><td>{{ build_number }}</td></tr>
    {% endif %}
    {% if report_date %}
    <tr><th>Date</th><td>{{ report_date }}</td></tr>
    {% endif %}
  </table>
  {% endif %}

  <h2>Overall Summary</h2>

  <h3>Test Stage Summary</h3>
  <table class="index_summary">
    <colgroup>
      <col style="width:18%">
      <col style="width:8%">
      <col style="width:8%">
      <col style="width:8%">
      <col style="width:8%">
      <col style="width:10%">
      <col style="width:10%">
      <col style="width:18%">
      <col style="width:12%">
    </colgroup>
    <tr>
      <th>Test Stage</th>
      <th>Total Tests</th>
      <th>Executed Tests</th>
      <th>Passed</th>
      <th>Failed</th>
      <th>Skipped (No Reason Specified)</th>
      <th>Skipped (Reason Specified)</th>
      <th>Timestamp</th>
      <th>View Report</th>
    </tr>
    {% for row in index_rows %}
      <tr>{{ row|safe }}</tr>
    {% endfor %}
  </table>

  <h3>Coverage Summary</h3>
  <table class="coverage_summary">
    <colgroup>
      <col style="width:30%">
      <col style="width:23%">
      <col style="width:23%">
      <col style="width:24%">
    </colgroup>
    <tr>
      <th>Test Stage</th>
      <th>Execution Rate (%)</th>
      <th>Execution Rate (without Skipped) (%)</th>
      <th>Pass Rate (%)</th>
    </tr>
    {% for cov in coverage_rows %}
    <tr>
      <td>{{ cov.stage }}</td>
      <td>{{ cov.exec_rate }}</td>
      <td>{{ cov.exec_no_skip }}</td>
      <td>{{ cov.pass_rate }}</td>
    </tr>
    {% endfor %}
  </table>

  <div style="margin-top:0.5rem;font-size:0.9em;">NT = Not Tested</div>

  <h2>Metrics Explained</h2>
  <table class="metric_defs">
    <colgroup>
      <col style="width:25%">
      <col style="width:45%">
      <col style="width:30%">
    </colgroup>
    <tr>
      <th>Metric</th>
      <th>Description</th>
      <th>Formula</th>
    </tr>
    <tr>
      <td>Total Tests</td>
      <td>Total number of test cases</td>
      <td>—</td>
    </tr>
    <tr>
      <td>Executed Tests</td>
      <td>Number of test cases that were run (excluding all skipped)</td>
      <td>Total Tests − (Skipped (No Reason Specified) + Skipped (Reason Specified))</td>
    </tr>
    <tr>
      <td>Passed</td>
      <td>Number of executed test cases that passed</td>
      <td>Executed Tests − Failed Tests</td>
    </tr>
    <tr>
      <td>Failed</td>
      <td>Number of executed test cases that failed</td>
      <td>—</td>
    </tr>
    <tr>
      <td>Skipped (No Reason Specified)</td>
      <td>Test cases skipped without a provided reason</td>
      <td>—</td>
    </tr>
    <tr>
      <td>Skipped (Reason Specified)</td>
      <td>Test cases skipped with a provided reason</td>
      <td>—</td>
    </tr>
    <tr>
      <td>Execution Rate (%)</td>
      <td>Percentage of test cases executed, including skips with reason</td>
      <td>(Passed + Failed + Skipped (Reason Specified)) / Total Tests × 100</td>
    </tr>
    <tr>
      <td>Execution Rate (without Skipped) (%)</td>
      <td>Percentage of test cases executed out of total, excluding all skips</td>
      <td>(Passed + Failed) / Total Tests × 100</td>
    </tr>
    <tr>
      <td>Pass Rate (%)</td>
      <td>Percentage of executed tests that passed</td>
      <td>Passed / Total Tests × 100</td>
    </tr>
  </table>
</body>
</html>
